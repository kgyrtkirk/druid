# testVirtualColumnOnMVFilterJoinExpression@filter-rewrites case-crc:f4ddf549
# quidem testcase reason: SLIGHTLY_WORSE_PLAN
!set sqlQueryId dummy
!set defaultTimeout 300000
!set debug true
!set maxScatterGatherBytes 9223372036854775807
!set enableJoinFilterRewriteValueColumnFilters true
!set enableRewriteJoinToFilter false
!set sqlCurrentTimestamp 2000-01-01T00:00:00Z
!set plannerStrategy DECOUPLED
!set enableJoinFilterRewrite true
!set outputformat mysql
!use druidtest:///
SELECT foo1.dim3, foo2.dim3 FROM druid.numfoo as foo1 INNER JOIN druid.numfoo as foo2 ON MV_FILTER_ONLY(foo1.dim3, ARRAY['a']) = MV_FILTER_ONLY(foo2.dim3, ARRAY['a'])
;
!ok
!logicalPlan
!druidPlan
!nativePlan
